<link rel="stylesheet" href="https://unpkg.com/bluesky-comments@0.9.0/dist/bluesky-comments.css">

<div id="bluesky-comments"></div>

<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18",
    "react-dom/client": "https://esm.sh/react-dom@18/client"
  }
}
</script>

<script type="module">
  import { createElement } from 'react';
  import { createRoot } from 'react-dom/client';
  import { BlueskyComments, BlueskyFilters } from 'https://unpkg.com/bluesky-comments@0.9.0/dist/bluesky-comments.es.js';

  const author = 'angadhn.com';
  const domain = 'angadh.netlify.app';
  const container = document.getElementById('bluesky-comments');
  const root = createRoot(container);
  root.render(
    createElement(BlueskyComments, {
      author: author,
      domain: domain,
      commentFilters: [
        BlueskyFilters.NoPins,  // Hide pin-only comments
        BlueskyFilters.MinCharacterCountFilter(2),  // Hide very short comments
        comment => comment.post.record.text.includes('ðŸ¤–')  // Hide bot-like comments
      ],
      onEmpty: (details) => {
        console.error('Failed to load comments:', details);
        container.innerHTML = details.message.includes('No matching post found')
          ? `Comments will appear here after sharing this page on <a href="https://bsky.app/profile/${author}" target="_blank">Bluesky</a>.`
          : 'No comments yet. Be the first to comment!';
      }
    })
  );
</script> 